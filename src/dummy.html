<!DOCTYPE html>
<html lang="en">
<head>
    <title>Socket.io Online Users</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>Online Users: <span id="count">0</span></h1>

    <script>
        const userId = Math.floor(Math.random() * 1000); // Generate a unique user ID

        // Corrected WebSocket connection (connect to the main server, not the API route)
        const socket = io("http://localhost:3000", { 
            query: { userId }, // Send user ID when connecting
        });

        // Listen for online user updates from the server
        socket.on("onlineUsers", (count) => {
            document.getElementById("count").innerText = count;
        });
    </script>
</body>
</html>
